<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TROUBLESHOOTING • dsUpload</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="TROUBLESHOOTING"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dsUpload</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.6.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="articles/dsUpload.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="articles/betaDictionaries.html">Beta dictionaries</a>
    </li>
    <li>
      <a href="articles/dataVersioning.html">Data versioning</a>
    </li>
    <li>
      <a href="articles/dictionaryVersioning.html">Dictionairy versioning</a>
    </li>
    <li>
      <a href="articles/qualityControl.html">Quality control</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lifecycle-project/ds-upload/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>TROUBLESHOOTING</h1>
    </div>

<div id="troubleshooting" class="section level1">

<p>All kinds of stuff can go wrong. This a collection of scenario’s where you might run into.</p>
<div class="section level2">
<h2 id="install-r">Install R<a class="anchor" aria-label="anchor" href="#install-r"></a></h2>
<p>You need to have R installed on your system. This differs per operating system. &gt; <strong>IMPORTANT:</strong> install R where you have write access also for other files. Within a contained environment this is for example your network drive.</p>
<div class="section level3">
<h3 id="for-windows">For Windows<a class="anchor" aria-label="anchor" href="#for-windows"></a></h3>
<p>Get R from: <a href="https://cran.r-project.org/bin/windows/base/" class="external-link uri">https://cran.r-project.org/bin/windows/base/</a>. More specifically: <a href="https://cran.r-project.org/bin/windows/base/R-3.6.1-win.exe" class="external-link uri">https://cran.r-project.org/bin/windows/base/R-3.6.1-win.exe</a>.</p>
<p>You can install the package with the default settings.</p>
</div>
<div class="section level3">
<h3 id="for-mac">For Mac<a class="anchor" aria-label="anchor" href="#for-mac"></a></h3>
<p>Get R from: <a href="https://cran.r-project.org/bin/macosx/" class="external-link uri">https://cran.r-project.org/bin/macosx/</a>. More specifically: <a href="https://cran.r-project.org/bin/macosx/R-3.6.1.pkg" class="external-link uri">https://cran.r-project.org/bin/macosx/R-3.6.1.pkg</a>.</p>
<p>You can install the package with the default settings.</p>
<p><strong>RStudio</strong></p>
<p>RStudio is nice to have but not a necessity. You can download it here: <a href="https://www.rstudio.com/products/rstudio/download/#download" class="external-link uri">https://www.rstudio.com/products/rstudio/download/#download</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="update-your-r-version-in-rstudio">Update your R version in RStudio<a class="anchor" aria-label="anchor" href="#update-your-r-version-in-rstudio"></a></h2>
<p>Sometimes you run an old version of R. You need to upgrade whenever that happens to the latest version. This will be different for Windows and Mac.</p>
<div class="section level3">
<h3 id="for-windows-1">For Windows<a class="anchor" aria-label="anchor" href="#for-windows-1"></a></h3>
<p>Goto <em>Start</em> –&gt; <em>Type ‘R’ within the Run field</em>. Click on <em>R x.x.x</em> to get to the commandline interface</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"installr"</span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://talgalili.github.io/installr/" class="external-link">installr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">updateR</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You will get a wizard, please choose all the defaults and proceed with the installation.</p>
</div>
<div class="section level3">
<h3 id="for-mac-1">For Mac<a class="anchor" aria-label="anchor" href="#for-mac-1"></a></h3>
<p>You can use <code>updateR</code>. Install it via the following commands:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'devtools'</span><span class="op">)</span> <span class="co">#assuming it is not already installed</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'andreacirilloac/updateR'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">updateR</span><span class="op">)</span></span>
<span><span class="fu">updateR</span><span class="op">(</span>admin_password <span class="op">=</span> <span class="st">'Admin user password'</span><span class="op">)</span></span></code></pre>
<blockquote>
<p><strong>reference</strong>: for more information check: <a href="http://www.andreacirillo.com/2018/03/10/updater-package-update-r-version-with-a-function-on-mac-osx/" class="external-link uri">http://www.andreacirillo.com/2018/03/10/updater-package-update-r-version-with-a-function-on-mac-osx/</a></p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="package-wont-install">Package won’t install<a class="anchor" aria-label="anchor" href="#package-wont-install"></a></h2>
<div class="section level3">
<h3 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a></h3>
<p>You need these packages to can make use of the dsUpload R-package.</p>
<ul><li>opalr (&gt;= 1.2.0),</li>
<li>dplyr,</li>
<li>tidyr,</li>
<li>httr,</li>
<li>jsonlite,</li>
<li>stringr,</li>
<li>data.table,</li>
<li>readr,</li>
<li>readxl,</li>
<li>haven,</li>
<li>plotly,</li>
<li>gmodels,</li>
<li>ggplot2</li>
</ul><blockquote>
<p>For Opal reference documentation check: <a href="http://opaldoc.obiba.org/en/latest/r-user-guide/datashield.html" class="external-link uri">http://opaldoc.obiba.org/en/latest/r-user-guide/datashield.html</a></p>
</blockquote>
<div class="section level4">
<h4 id="for-windows-2">For Windows<a class="anchor" aria-label="anchor" href="#for-windows-2"></a></h4>
<p>Install the Opal package by installing <code>RCurl, rjson</code> first. <code>{r, eval = FALSE} install.packages(c('httr', 'rjson'), repos=c('https://cloud.r-project.org/', 'https://www.stats.ox.ac.uk/pub/RWin/'))</code></p>
<p>Then execute: <code>{r, eval = FALSE} install.packages('opalr', repos=c('https://cloud.r-project.org', 'https://www.stats.ox.ac.uk/pub/RWin/'))</code></p>
<p>Install remaining packages by executing: <code>{r, eval = FALSE} install.packages(c('metafor', 'tidyr', 'dplyr', 'readr', 'stringr', 'readxl', 'data.table', 'haven', 'gmodels', 'ggplot2', 'plotly', 'openxslx', 'jsonlite'), repos=c('https://cloud.r-project.org/', 'https://www.stats.ox.ac.uk/pub/RWin/'))</code></p>
<p>This may take a while</p>
</div>
<div class="section level4">
<h4 id="for-mac-2">For Mac<a class="anchor" aria-label="anchor" href="#for-mac-2"></a></h4>
<p>Install Opal by executing: <code>{r, eval = FALSE} install.packages('opalr', repos=c('https://cloud.r-project.org/', 'https://cran.obiba.org'), dependencies=TRUE)</code></p>
<p>Install remaing packages by executing: <code>{r, eval = FALSE} install.packages(c('metafor', 'tidyr', 'dplyr', 'readr', 'stringr', 'readxl', 'data.table', 'haven', 'gmodels', 'ggplot2', 'plotly', 'httr', 'openxslx', 'jsonlite'), repos=c('https://cloud.r-project.org/'))</code></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="errors-when-running-the-program">Error’s when running the program<a class="anchor" aria-label="anchor" href="#errors-when-running-the-program"></a></h2>
<p>Error’s can occur during the method calls in the lifecycleProject package.</p>
<div class="section level4">
<h4 id="attributes-are-not-identical-across-measure-variables-they-will-be-dropped">Attributes are not identical across measure variables; they will be dropped<a class="anchor" aria-label="anchor" href="#attributes-are-not-identical-across-measure-variables-they-will-be-dropped"></a></h4>
<p>When this message occurs it means the the types of the vectors concerning the yearly or monthly repeated measures are different. The reshape function will resolve this, but it is wise to check your dataset for these differences.</p>
<p>For instance:</p>
<pre><code><span><span class="va">weight_01</span> <span class="op">==</span> <span class="va">integer</span></span>
<span><span class="va">...</span></span>
<span><span class="va">wieght_04</span> <span class="op">==</span> <span class="va">decimal</span></span></code></pre>
<div class="section level5">
<h5 id="packages-wont-register-within-the-r-environment">Packages won’t register within the R-environment<a class="anchor" aria-label="anchor" href="#packages-wont-register-within-the-r-environment"></a></h5>
<div class="section level6">
<h6 id="for-windows-3">For Windows<a class="anchor" aria-label="anchor" href="#for-windows-3"></a></h6>
<p>Sometimes the installed packages can not be registered in the R-environment because of the missing package <code>pkgconfig</code></p>
<p><code>{r, eval = FALSE} install.packages("pkgconfig")</code></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="cannot-allocate-vector-of-xxxxx">Cannot allocate vector of (xxx.xx)<a class="anchor" aria-label="anchor" href="#cannot-allocate-vector-of-xxxxx"></a></h3>
<p>You can increase the memory that can be used by R by executing the following command.</p>
<p><code>{r, eval = FALSE} memory.size(max = TRUE)</code></p>
</div>
</div>
<div class="section level2">
<h2 id="errors-importing-the-tables">Error’s importing the tables<a class="anchor" aria-label="anchor" href="#errors-importing-the-tables"></a></h2>
<div class="section level4">
<h4 id="tablenames-too-large">Tablenames too large<a class="anchor" aria-label="anchor" href="#tablenames-too-large"></a></h4>
<p>When Opal returns something like this and you have a SQL like backend (MariaDB or MySQL)</p>
<pre><code>Identifier name 'idx_lifecycle_1_0_20191119_172835_1_0_monthly_repeated_measures_created' is too long</code></pre>
<p>You need to run this on the mysql-client:</p>
<pre><code>SET @@global.innodb_large_prefix = 1;</code></pre>
<p>This options is persisted in the database and allows you to create larger indexes on the SQL server.</p>
</div>
<div class="section level4">
<h4 id="the-url-protocol-is-not-set">The URL protocol is not set<a class="anchor" aria-label="anchor" href="#the-url-protocol-is-not-set"></a></h4>
<p>When you do not specify the protocol in the URL.</p>
<p>Incorrect:</p>
<pre><code><span><span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">newDSLoginBuilder</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">builder.append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"opal.cohort-example.org"</span><span class="op">)</span></span></code></pre>
<p>Results in:</p>
<pre><code>Error in curl::curl_fetch_memory(url, handle = handle) :
Protocol "" not supported or disabled in libcurl</code></pre>
<p>Correct:</p>
<pre><code><span><span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">newDSLoginBuilder</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">builder.append</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"https://opal.cohort-example.org"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="non-default-database-name">Non-default database name<a class="anchor" aria-label="anchor" href="#non-default-database-name"></a></h4>
<p>When you receive the error below, you need to specify the <code>database_name</code> in the <code><a href="reference/du.upload.html">du.upload()</a></code> method.</p>
<pre><code>Error: Client error: (404) Not Found; NoSuchDatabase: opal_data</code></pre>
<p>Example:</p>
<pre><code><span><span class="fu"><a href="reference/du.upload.html">du.upload</a></span><span class="op">(</span>database_name <span class="op">=</span> <span class="st">"example_database_name"</span>, <span class="va">.....</span><span class="op">)</span></span></code></pre>
<p>You can check the database name in the “Administration”-tab and then “Databases”. The second database has a name that you need to specify.</p>
</div>
<div class="section level4">
<h4 id="rcpp-package-is-not-installed-correctly">Rcpp package is not installed correctly<a class="anchor" aria-label="anchor" href="#rcpp-package-is-not-installed-correctly"></a></h4>
<p>If you receive the error below you need to reinstall the Rcpp package.</p>
<pre><code>Error in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet,  :
  function 'Rcpp_precious_remove' not provided by package 'Rcpp'</code></pre>
<p>Reinstalling can be done using the following code:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Rcpp"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rcpp.org" class="external-link">Rcpp</a></span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Mariska Slofstra, Sido Haakma, Angela Pinot de Moira, Maxime Cornet, Sebastian Rauschert.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

